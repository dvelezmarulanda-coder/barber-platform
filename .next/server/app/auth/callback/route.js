"use strict";(()=>{var e={};e.id=936,e.ids=[936],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5528:e=>{e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4300:e=>{e.exports=require("buffer")},9312:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>x,originalPathname:()=>g,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>p,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>m});var a={};r.r(a),r.d(a,{GET:()=>GET});var o=r(884),n=r(6132),i=r(6813),s=r(4596),c=r(5798);async function GET(e){let t=new URL(e.url),r=t.searchParams.get("code");if(r){let e=(0,s.cookies)(),a=(0,i.createRouteHandlerClient)({cookies:()=>e});try{await a.auth.exchangeCodeForSession(r);let{data:{user:e}}=await a.auth.getUser();if(e){let{data:r}=await a.from("perfiles").select("rol").eq("id",e.id).single(),o=r?.rol==="admin"?new URL("/admin",t.origin):new URL("/dashboard",t.origin);return c.Z.redirect(o)}}catch(e){console.error("Error in auth callback:",e)}}return c.Z.redirect(new URL("/",t.origin))}let u=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/auth/callback/route",pathname:"/auth/callback",filename:"route",bundlePath:"app/auth/callback/route"},resolvedPagePath:"C:\\Users\\DAVID\\OneDrive\\Documentos\\barber-platform\\app\\auth\\callback\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:p,headerHooks:x,staticGenerationBailout:m}=u,g="/auth/callback/route"}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[657,736],()=>__webpack_exec__(9312));module.exports=r})();