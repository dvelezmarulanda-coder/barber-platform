(()=>{var e={};e.id=626,e.ids=[626],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},1493:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=r(7096),n=r(6132),a=r(7284),o=r.n(a),i=r(2564),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5004)),"C:\\Users\\DAVID\\OneDrive\\Documentos\\barber-platform\\app\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2834)),"C:\\Users\\DAVID\\OneDrive\\Documentos\\barber-platform\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\DAVID\\OneDrive\\Documentos\\barber-platform\\app\\login\\page.tsx"],u="/login/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5721:(e,t,r)=>{Promise.resolve().then(r.bind(r,9402))},9402:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>LoginPage});var s=r(784),n=r(9885),a=r(3334),o=r(1440),i=r.n(o),l=r(3250),c=r(8626);function LoginPage(){let[e,t]=(0,n.useState)(""),[r,o]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),x=(0,a.createClientComponentClient)(),[p,m]=(0,n.useState)(""),[h,g]=(0,n.useState)(!1),handlePasswordLogin=async t=>{t.preventDefault(),o(!0),u(null);let r=e.trim();try{let{data:e,error:t}=await x.auth.signInWithPassword({email:r,password:p});if(t){console.error("Login error:",t),u("Error: Contrase\xf1a incorrecta o usuario no encontrado"),o(!1);return}if(e.user){let{data:t}=await x.from("perfiles").select("*").eq("id",e.user.id).single();t?.rol==="admin"?window.location.href="/admin/barbers":window.location.href="/dashboard"}}catch(e){console.error("Unexpected error:",e),u("Ocurri\xf3 un error al iniciar sesi\xf3n"),o(!1)}},handleMagicLink=async()=>{o(!0),u(null);let t=e.trim();try{let{error:e}=await x.auth.signInWithOtp({email:t,options:{emailRedirectTo:"https://trim-app.vercel.app/auth/callback?next=/dashboard"}});e?u(`Error: ${e.message}`):u("\xa1Enlace m\xe1gico enviado! Revisa tu correo.")}catch(e){u("Ocurri\xf3 un error al verificar los permisos")}o(!1)};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#F2F2F2] px-4 font-outfit",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-[2rem] border border-white shadow-xl",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[s.jsx(i(),{href:"/",children:s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx("span",{className:"bg-navy-900 text-white w-10 h-10 flex items-center justify-center rounded-full text-lg font-bold",children:"T"})})}),s.jsx("h2",{className:"mt-4 text-center text-3xl font-bold text-navy-900 tracking-tight",children:"Bienvenido"}),s.jsx("p",{className:"mt-2 text-center text-sm text-zinc-500",children:"Ingresa tus credenciales para acceder"})]}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:handlePasswordLogin,children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-navy-900 mb-1",children:"Correo electr\xf3nico"}),s.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-xl block w-full px-4 py-3.5 border border-zinc-200 placeholder-zinc-400 text-navy-900 bg-zinc-50 focus:outline-none focus:ring-2 focus:ring-navy-900 focus:bg-white transition-all text-lg",placeholder:"nombre@ejemplo.com",value:e,onChange:e=>t(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-navy-900 mb-1",children:"Contrase\xf1a"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("input",{id:"password",name:"password",type:h?"text":"password",autoComplete:"current-password",className:"appearance-none rounded-xl block w-full px-4 py-3.5 border border-zinc-200 placeholder-zinc-400 text-navy-900 bg-zinc-50 focus:outline-none focus:ring-2 focus:ring-navy-900 focus:bg-white transition-all text-lg pr-12",placeholder:"Tu contrase\xf1a",value:p,onChange:e=>m(e.target.value)}),s.jsx("button",{type:"button",onClick:()=>g(!h),className:"absolute right-4 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-navy-900 transition-colors",children:h?s.jsx(l.Z,{size:20}):s.jsx(c.Z,{size:20})})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[s.jsx("button",{type:"submit",disabled:r||!p,className:"group relative w-full flex justify-center py-4 px-4 border border-transparent text-lg font-bold rounded-xl text-white bg-navy-900 hover:bg-navy-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-navy-900 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5",children:r?"Entrando...":"Entrar con Contrase\xf1a"}),s.jsx("button",{type:"button",onClick:handleMagicLink,disabled:r,className:"group relative w-full flex justify-center py-3 px-4 border-2 border-zinc-200 text-base font-bold rounded-xl text-zinc-600 bg-white hover:bg-zinc-50 hover:border-zinc-300 focus:outline-none transition-all",children:"Enviarme enlace m\xe1gico (Sin contrase\xf1a)"})]}),d&&s.jsx("div",{className:`text-center text-sm p-4 rounded-xl font-medium ${d.includes("Error")||d.includes("incorrecta")?"bg-red-50 text-red-600 border border-red-100":"bg-green-50 text-green-700 border border-green-100"}`,children:d})]}),s.jsx("div",{className:"text-center pt-4",children:s.jsx(i(),{href:"/",className:"text-sm text-zinc-400 hover:text-navy-900 transition-colors font-medium",children:"â† Volver al inicio"})})]})})}},5004:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>a,default:()=>l});var s=r(5153);let n=(0,s.createProxy)(String.raw`C:\Users\DAVID\OneDrive\Documentos\barber-platform\app\login\page.tsx`),{__esModule:a,$$typeof:o}=n,i=n.default,l=i}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[657,126,614,334,551,9],()=>__webpack_exec__(1493));module.exports=r})();