(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{3080:function(e,t,r){Promise.resolve().then(r.bind(r,7544))},7544:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return LoginPage}});var a=r(7437),n=r(2265),s=r(3082),o=r(1396),i=r.n(o);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),toPascalCase=e=>{let t=toCamelCase(e);return t.charAt(0).toUpperCase()+t.slice(1)},mergeClasses=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),hasA11yProp=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:o,iconNode:i,...c},d)=>(0,n.createElement)("svg",{ref:d,...l,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:mergeClasses("lucide",s),...!o&&!hasA11yProp(c)&&{"aria-hidden":"true"},...c},[...i.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(o)?o:[o]])),createLucideIcon=(e,t)=>{let r=(0,n.forwardRef)(({className:r,...a},s)=>(0,n.createElement)(c,{ref:s,iconNode:t,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(e))}`,`lucide-${e}`,r),...a}));return r.displayName=toPascalCase(e),r},d=createLucideIcon("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),u=createLucideIcon("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function LoginPage(){let[e,t]=(0,n.useState)(""),[r,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)(null),x=(0,s.createClientComponentClient)(),[m,h]=(0,n.useState)(""),[f,p]=(0,n.useState)(!1),handlePasswordLogin=async t=>{t.preventDefault(),o(!0),c(null);let r=e.trim();try{let{data:e,error:t}=await x.auth.signInWithPassword({email:r,password:m});if(t){console.error("Login error:",t),c("Error: Contrase\xf1a incorrecta o usuario no encontrado"),o(!1);return}if(e.user){let{data:t}=await x.from("perfiles").select("*").eq("id",e.user.id).single();(null==t?void 0:t.rol)==="admin"?window.location.href="/admin/barbers":window.location.href="/dashboard"}}catch(e){console.error("Unexpected error:",e),c("Ocurri\xf3 un error al iniciar sesi\xf3n"),o(!1)}},handleMagicLink=async()=>{o(!0),c(null);let t=e.trim();try{let{error:e}=await x.auth.signInWithOtp({email:t,options:{emailRedirectTo:"".concat("https://trim-app.vercel.app","/auth/callback?next=/dashboard")}});e?c("Error: ".concat(e.message)):c("\xa1Enlace m\xe1gico enviado! Revisa tu correo.")}catch(e){c("Ocurri\xf3 un error al verificar los permisos")}o(!1)};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#F2F2F2] px-4 font-outfit",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-[2rem] border border-white shadow-xl",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(i(),{href:"/",children:(0,a.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,a.jsx)("span",{className:"bg-navy-900 text-white w-10 h-10 flex items-center justify-center rounded-full text-lg font-bold",children:"T"})})}),(0,a.jsx)("h2",{className:"mt-4 text-center text-3xl font-bold text-navy-900 tracking-tight",children:"Bienvenido"}),(0,a.jsx)("p",{className:"mt-2 text-center text-sm text-zinc-500",children:"Ingresa tus credenciales para acceder"})]}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:handlePasswordLogin,children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email-address",className:"block text-sm font-medium text-navy-900 mb-1",children:"Correo electr\xf3nico"}),(0,a.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-xl block w-full px-4 py-3.5 border border-zinc-200 placeholder-zinc-400 text-navy-900 bg-zinc-50 focus:outline-none focus:ring-2 focus:ring-navy-900 focus:bg-white transition-all text-lg",placeholder:"nombre@ejemplo.com",value:e,onChange:e=>t(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-navy-900 mb-1",children:"Contrase\xf1a"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:"password",name:"password",type:f?"text":"password",autoComplete:"current-password",className:"appearance-none rounded-xl block w-full px-4 py-3.5 border border-zinc-200 placeholder-zinc-400 text-navy-900 bg-zinc-50 focus:outline-none focus:ring-2 focus:ring-navy-900 focus:bg-white transition-all text-lg pr-12",placeholder:"Tu contrase\xf1a",value:m,onChange:e=>h(e.target.value)}),(0,a.jsx)("button",{type:"button",onClick:()=>p(!f),className:"absolute right-4 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-navy-900 transition-colors",children:f?(0,a.jsx)(d,{size:20}):(0,a.jsx)(u,{size:20})})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)("button",{type:"submit",disabled:r||!m,className:"group relative w-full flex justify-center py-4 px-4 border border-transparent text-lg font-bold rounded-xl text-white bg-navy-900 hover:bg-navy-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-navy-900 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5",children:r?"Entrando...":"Entrar con Contrase\xf1a"}),(0,a.jsx)("button",{type:"button",onClick:handleMagicLink,disabled:r,className:"group relative w-full flex justify-center py-3 px-4 border-2 border-zinc-200 text-base font-bold rounded-xl text-zinc-600 bg-white hover:bg-zinc-50 hover:border-zinc-300 focus:outline-none transition-all",children:"Enviarme enlace m\xe1gico (Sin contrase\xf1a)"})]}),l&&(0,a.jsx)("div",{className:"text-center text-sm p-4 rounded-xl font-medium ".concat(l.includes("Error")||l.includes("incorrecta")?"bg-red-50 text-red-600 border border-red-100":"bg-green-50 text-green-700 border border-green-100"),children:l})]}),(0,a.jsx)("div",{className:"text-center pt-4",children:(0,a.jsx)(i(),{href:"/",className:"text-sm text-zinc-400 hover:text-navy-900 transition-colors font-medium",children:"‚Üê Volver al inicio"})})]})})}},1396:function(e,t,r){e.exports=r(8326)}},function(e){e.O(0,[311,82,326,971,472,744],function(){return e(e.s=3080)}),_N_E=e.O()}]);