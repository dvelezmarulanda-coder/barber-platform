(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{1761:function(e,t,n){Promise.resolve().then(n.bind(n,6341))},6341:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return AdminLayout}});var s=n(7437),i=n(2265),r=n(3082),a=n(4033),l=n(1396),c=n.n(l),d=n(1628);function AdminLayout(e){let{children:t}=e,[n,l]=(0,i.useState)(!0),o=(0,a.useRouter)(),x=(0,a.usePathname)(),h=(0,r.createClientComponentClient)(),m="/admin/qr"===x;(0,i.useEffect)(()=>{let checkAdmin=async()=>{try{let{data:{user:e}}=await h.auth.getUser();if(!e){o.push("/login");return}let{data:t}=await h.from("perfiles").select("rol").eq("id",e.id).single();if((null==t?void 0:t.rol)!=="admin"){o.push("/dashboard");return}}catch(e){console.error("Error checking admin:",e),o.push("/dashboard")}finally{l(!1)}};checkAdmin()},[h,o]);let handleLogout=async()=>{await h.auth.signOut(),o.push("/"),o.refresh()},[f,u]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{u(!1)},[x]),n)return(0,s.jsx)("div",{className:"min-h-screen bg-[#F2F2F2] text-navy-900 flex items-center justify-center font-outfit",children:"Verificando acceso..."});let NavigationContent=()=>(0,s.jsxs)("nav",{className:"flex-1 p-6 space-y-2",children:[(0,s.jsx)("p",{className:"px-4 text-xs font-bold text-zinc-400 uppercase tracking-wider mb-4",children:"Gesti\xf3n"}),(0,s.jsxs)(c(),{href:"/admin/settings",className:(0,d.cn)("flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium","/admin/settings"===x?"bg-navy-900 text-white shadow-md":"text-zinc-600 hover:bg-zinc-50 hover:text-navy-900"),children:[(0,s.jsx)("span",{children:"⚙️"})," Configuraci\xf3n"]}),(0,s.jsxs)(c(),{href:"/admin/appointments",className:(0,d.cn)("flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium","/admin/appointments"===x?"bg-navy-900 text-white shadow-md":"text-zinc-600 hover:bg-zinc-50 hover:text-navy-900"),children:[(0,s.jsx)("span",{children:"\uD83D\uDCC5"})," Citas"]}),(0,s.jsxs)(c(),{href:"/admin/services",className:(0,d.cn)("flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium","/admin/services"===x?"bg-navy-900 text-white shadow-md":"text-zinc-600 hover:bg-zinc-50 hover:text-navy-900"),children:[(0,s.jsx)("span",{children:"✂️"})," Servicios"]}),(0,s.jsxs)(c(),{href:"/admin/barbers",className:(0,d.cn)("flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium","/admin/barbers"===x?"bg-navy-900 text-white shadow-md":"text-zinc-600 hover:bg-zinc-50 hover:text-navy-900"),children:[(0,s.jsx)("span",{children:"\uD83D\uDC88"})," Barberos"]}),(0,s.jsxs)(c(),{href:"/admin/qr",className:(0,d.cn)("flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium","/admin/qr"===x?"bg-navy-900 text-white shadow-md":"text-zinc-600 hover:bg-zinc-50 hover:text-navy-900"),children:[(0,s.jsx)("span",{children:"\uD83D\uDCF1"})," C\xf3digo QR"]})]});return(0,s.jsxs)("div",{className:"min-h-screen bg-[#F2F2F2] flex flex-col md:flex-row font-outfit",children:[!m&&(0,s.jsxs)("div",{className:"md:hidden bg-white border-b border-zinc-200 p-4 flex items-center justify-between sticky top-0 z-30 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"bg-navy-900 text-white w-8 h-8 flex items-center justify-center rounded-full text-sm font-bold",children:"T"}),(0,s.jsx)("span",{className:"font-bold tracking-tight text-xl text-navy-900",children:"ADMIN"})]}),(0,s.jsx)("button",{onClick:()=>u(!f),className:"p-2 text-navy-900 hover:bg-zinc-100 rounded-lg",children:f?"✕":"☰"})]}),f&&(0,s.jsxs)("div",{className:"fixed inset-0 z-20 bg-white pt-20 px-4 md:hidden overflow-y-auto",children:[(0,s.jsx)(NavigationContent,{}),(0,s.jsxs)("div",{className:"p-6 border-t border-zinc-100 flex flex-col gap-2",children:[(0,s.jsxs)(c(),{href:"/dashboard",className:"flex items-center gap-2 text-zinc-500 hover:text-navy-900 transition-colors text-sm font-medium px-4 py-2",children:[(0,s.jsx)("span",{children:"←"})," Volver al Dashboard"]}),(0,s.jsxs)("button",{onClick:handleLogout,className:"flex items-center gap-2 text-red-500 hover:text-red-700 hover:bg-red-50 transition-colors text-sm font-medium px-4 py-2 rounded-lg text-left w-full",children:[(0,s.jsx)("span",{children:"\uD83D\uDEAA"})," Cerrar Sesi\xf3n"]})]})]}),!m&&(0,s.jsxs)("aside",{className:"hidden md:flex w-72 bg-white border-r border-zinc-200 flex-col shadow-sm sticky top-0 h-screen z-10",children:[(0,s.jsx)("div",{className:"p-8 border-b border-zinc-100",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"bg-navy-900 text-white w-8 h-8 flex items-center justify-center rounded-full text-sm font-bold",children:"T"}),(0,s.jsx)("span",{className:"font-bold tracking-tight text-xl text-navy-900",children:"ADMIN PANEL"})]})}),(0,s.jsx)(NavigationContent,{}),(0,s.jsxs)("div",{className:"p-6 border-t border-zinc-100 flex flex-col gap-2",children:[(0,s.jsxs)(c(),{href:"/dashboard",className:"flex items-center gap-2 text-zinc-500 hover:text-navy-900 transition-colors text-sm font-medium px-4 py-2",children:[(0,s.jsx)("span",{children:"←"})," Volver al Dashboard"]}),(0,s.jsxs)("button",{onClick:handleLogout,className:"flex items-center gap-2 text-red-500 hover:text-red-700 hover:bg-red-50 transition-colors text-sm font-medium px-4 py-2 rounded-lg text-left w-full",children:[(0,s.jsx)("span",{children:"\uD83D\uDEAA"})," Cerrar Sesi\xf3n"]})]})]}),(0,s.jsx)("main",{className:"flex-1 p-4 md:p-12 overflow-auto w-full",children:(0,s.jsx)("div",{className:"max-w-5xl mx-auto",children:t})})]})}},1628:function(e,t,n){"use strict";n.d(t,{cn:function(){return cn}});var s=n(7042),i=n(4769);function cn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.m6)((0,s.W)(t))}},1396:function(e,t,n){e.exports=n(8326)},4033:function(e,t,n){e.exports=n(94)}},function(e){e.O(0,[311,82,326,985,971,472,744],function(){return e(e.s=1761)}),_N_E=e.O()}]);